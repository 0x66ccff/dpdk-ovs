Intel® DPDK vSwitch provides a testing utility: ovs-testsuite. This is described in detail below.

______

## ovs-testsuite

The Open vSwitch testsuite (`ovs-testsuite`) is a set of unit tests that form the larger part of OVS' test framework. ovs-testsuite is an OVS-specific collection of unit tests that are designed to test atomic pieces of the code (as with all unit tests). This framework is written in GNU Autotest, with supporting Python scripts and C unit test files.

This section contains instructions on how to configure and test Intel® DPDK vSwitch using ovs-testsuite.

### Setup

The testsuite requires a minor amount of setup, due to the current design of Intel® DPDK vSwitch. Many of the tests will not run "out of the box", as calls to utilities used by the tests, such as `ovs-ofctl`, assume that said utilities are in the `PATH`. This assumption is not the case, as Intel® DPDK vSwitch does not "install" and place binaries in the `/bin` folder. As a result, the path must be modified, similar to the following:

```bash
export PATH=$PATH:$(OVS_DIR)/utilities:$(OVS_DIR)/ovsdb:$(OVS_DIR)/vswitchd
```

Additionally, Hugepages must be mounted before running ovs-testsuite. Please see the [Installation guide][doc-installation] for more information on how to do this.

### Run Tests

Tests may be run using the Open vSwitch Makefile, or via the testsuite script generated by `autoconf`. Details of both methods follow.

#### Run Tests via Make

To run all the Open vSwitch unit tests in Intel® DPDK vSwitch, one at a time:

```bash
cd openvswitch
make check
```

To run only Intel® DPDK related unit tests:

```bash
cd openvswitch
make check TESTSUITEFLAGS='-k dpdk'
```

Tests do not have interdependencies, so any subset may be run independently. For example, to run only a subset of tests, test 111 and tests 222 through 333:

```bash
make check TESTSUITEFLAGS='111 222-333'
```

Alternatively, to run tests matching a given keyword:

```bash
make check TESTSUITEFLAGS='-k ovsdb'
```

To list all available tests:

```bash
make check TESTSUITEFLAGS=--list
```

For all other options, execute `--help`:

```bash
make check TESTSUITEFLAGS=--help
```

#### Run Tests via `testsuite` Script

It is also possible to run the tests via the testsuite script generated by autoconf. This method is useful to run tests without rebuilding them (They are built automatically when Intel® DPDK vSwitch is built).

To run all the Open vSwitch unit tests in Intel® DPDK vSwitch, one at a time:

```bash
cd openvswitch/tests
./testsuite
```

To run only Intel® DPDK related unit tests:

```bash
cd openvswitch
./testsuite -k dpdk
```

To clean logs and results of previous tests:

```bash
./testsuite -c [tests]
```

For all other options, execute `--help`:

```bash
./testsuite --help
```

______

© 2014, Intel Corporation. All Rights Reserved

[doc-installation]: 01_Installation.md
